{% extends "base.html" %}

{% block title %}{% endblock %}
{% block head %}
{{ super() }}

{% endblock %}

{% block page_content %}
{% include 'include/sidebar.html' %}
<h1>
  우리 고양이의 새 입맛을 찾아서
</h1>
<br>
{% if data %}
{% for d in data %}
<form>
<div class="card mb-12">
  <div class="row no-gutters">
    <div class="col-md-4">
      <img src={{ d.img }} class="card-img" alt="img">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h2>{{d.brand}} {{d.title}}</h2> 
        <!-- <div class="col-sm-10">
          <input name = "foodtitle" type="text" value={{ d.title }} >-->
          <!-- <input class="form-control" type="text" placeholder={{d.title}} readonly> -->
        <!--</div> -->
        <!-- <h2>{{d.brand}}</h2> <h2 id = "foodtitle">{{ d.title }}</h2> -->
        <script> var foodname = {{ d.title }}; </script>
        <script>
          function getData() {
  return axios.get(foodname);
}
(async () => {
   console.log(await getData())
})()
        </script>
        <p class="card-text"><strong>원재료 :</strong> {{d.content}}</p>
        <p class="card-text"><strong>영양소 :</strong> {{d.nutrient}}</p>
        <p class="card-text"><strong>정보 :</strong> {{ d.info }}</p>
        <p class="card-text"><strong>칼로리 :</strong> {{ d.calory }}</p>
        <div class="form-group">
          <select class="form-control form-control-sm" name="foodtitle">
            <option>{{ d.title }}</option>
          </select>
          <label for="exampleFormControlSelect1">고양이가 얼마나 좋아했나요?</label>
          <select class="form-control" name="stars">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
          </select>
          <button type="submit" href = "/main" class="btn btn-primary" data-toggle="modal" data-target="#myModal">평가</button>
          <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">
                <div class="alert alert-success alert-dismissible">
                    <a  class="close" data-dismiss="modal" aria-label="close">&times;</a>
                    <strong>추가!</strong> 사료 선호도 정보가 추가되었습니다.                  
                  </div>
            </div>
          </div>
        </div>
      {% if formitem %}
      {{ formitem }}
    {% endif %}
        <!-- <div class="wrap">
          <div class="stars">
            <label class="rate">
              <input type="radio" name="radio1" id="star1" value="1">
              <div class="face"></div>
              <i class="far fa-star star one-star"></i>
            </label>
            <label class="rate">
              <input type="radio" name="radio1" id="star2" value="2">
              <div class="face"></div>
              <i class="far fa-star star two-star"></i>
            </label>
            <label class="rate">
              <input type="radio" name="radio1" id="star3" value="3">
              <div class="face"></div>
              <i class="far fa-star star three-star"></i>
            </label>
            <label class="rate">
              <input type="radio" name="radio1" id="star4" value="4">
              <div class="face"></div>
              <i class="far fa-star star four-star"></i>
            </label>
            <label class="rate">
              <input type="radio" name="radio1" id="star5" value="5">
              <div class="face"></div>
              <i class="far fa-star star five-star"></i>
            </label>
            <script>
              $(function () {

                $(document).on({
                  mouseover: function (event) {
                    $(this).find('.far').addClass('star-over');
                    $(this).prevAll().find('.far').addClass('star-over');
                  },
                  mouseleave: function (event) {
                    $(this).find('.far').removeClass('star-over');
                    $(this).prevAll().find('.far').removeClass('star-over');
                  }
                }, '.rate');


                $(document).on('click', '.rate', function () {
                  if (!$(this).find('.star').hasClass('rate-active')) {
                    $(this).siblings().find('.star').addClass('far').removeClass('fas rate-active');
                    $(this).find('.star').addClass('rate-active fas').removeClass('far star-over');
                    $(this).prevAll().find('.star').addClass('fas').removeClass('far star-over');
                  } else {
                    console.log('has');
                  }
                });

              });


            </script> -->
          </div>
        </div>
      </div>
    </div>
  </form>
    <!-- Add icon library -->
    {% endfor %}
    {% endif %}
    <!-- {% if message %}
    <div class="alert alert-info">
      <p><strong>{{ message }}</strong></p>
    </div>
    {% endif %} -->

    {% endblock %}

    {% block scripts %}
    {{ super() }}



    {% endblock %}